---
icon: ğŸ“†
slug: '201117'
title: '201117'
main_category: Log
category: 2020
tags: ['í”„ë¡œì íŠ¸']
author: Younho Choo
author_title: younho9
author_url: https://github.com/younho9
author_image_url: https://avatars.githubusercontent.com/u/48426991
created_time: 2020-11-17
updated_time: 2021-02-15
---

## Narkdown í”„ë¡œì íŠ¸

- [notion-py](https://github.com/jamalex/notion-py) ë¥¼ ì‚¬ìš©í•´ì„œ Python ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰í–ˆì—ˆì§€ë§Œ Pythonì„ ì˜ ì‚¬ìš©í•˜ì§€ ì•Šë‹¤ë³´ë‹ˆ ìœ ì§€ ë³´ìˆ˜í•˜ê¸° í˜ë“¤ì—ˆë‹¤.

- `ts` ê¸°ë°˜ [notion-api-worker](https://github.com/splitbee/notion-api-worker) ê°€ ìˆì–´ì„œ ì´ë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í•œë‹¤.

### ëª©í‘œ

- CLIë¡œ page url ë˜ëŠ” database urlì„ ì…ë ¥ ë°›ê³  notionì˜ ì»¨í…ì¸ ë¥¼ íŒŒì‹±í•˜ì—¬ md íŒŒì¼ì„ ìƒì„±í•˜ì. (CMSë¥¼ ìœ„í•´)

- ì´í›„ ì›¹ í˜ì´ì§€ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìœ¼ë©´ ì¢‹ì„ ë“¯.

### fetch vs axios

í”„ë¡ íŠ¸ì—”ë“œì—ì„œ fetch, axiosëŠ” ìì£¼ ì‚¬ìš©í–ˆëŠ”ë°, node í™˜ê²½ì—ì„œ api ìš”ì²­ì„ í•´ë³´ëŠ” ê²ƒì€ ì²˜ìŒì´ë¼, ì–´ë–¤ ê²ƒì„ ì‚¬ìš©í• ì§€ ê³ ë¯¼í–ˆë‹¤.

- axiosëŠ” node í™˜ê²½ì—ì„œë„ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.

- fetchëŠ” node-fetch ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” NodeJS ëŸ°íƒ€ì„ í™˜ê²½ì—ì„œ `window.fetch` ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ìµœì†Œí•œì˜ ì½”ë“œë¥¼ ëª©í‘œë¡œ í•œë‹¤ê³  í•œë‹¤.

- í”„ë¡ íŠ¸ì—”ë“œ í™˜ê²½ì—ì„œ fetch ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ê²Œ ì¥ì ì´ë¼ê³  ìƒê°í•˜ëŠ”ë°, êµ³ì´ node-fetchë¥¼ ì‚¬ìš©í•  í•„ìš”ëŠ” ì—†ì„ ê²ƒ ê°™ì•„ì„œ, axiosë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤. (ë³´ì•ˆì ì¸ ì˜µì…˜ë„ axiosê°€ ë§ì´ ì œê³µí•œë‹¤.)

[https://www.geeksforgeeks.org/difference-between-fetch-and-axios-js-for-making-http-requests/](https://www.geeksforgeeks.org/difference-between-fetch-and-axios-js-for-making-http-requests/)

### ts-node

- `tsconfig` ìƒì„± ëª…ë ¹ì–´

```bash
tsc --init
```

- `tsconfig` ì˜µì…˜ ì •ë¦¬

[8 Best Practices for Future-Proofing Your TypeScript Code](https://medium.com/better-programming/8-best-practices-for-future-proofing-your-typescript-code-2600fb7d8063)

[tsconfig ì»´íŒŒì¼ ì˜µì…˜ ì •ë¦¬](https://valuefactory.tistory.com/453)

[[TS / Node] TS + Node.js + Express + Babel(option) + eslintë¡œ ê°œë°œí™˜ê²½ ì„¸íŒ…í•˜ê¸°](https://hack-jam.tistory.com/27)

[Node.js ì‹œì‘í•˜ê¸°](https://radlohead.gitbook.io/typescript-deep-dive/nodejs)

### notion-api-worker

- get page ë¦¬í„´

  - <details><summary>ê¸°ë³¸ í˜ì´ì§€</summary>

    ```json
    {
      "847c0e9b-15a1-42c9-9392-ca2f817c4eac": {
        "role": "editor",
        "value": {
          "id": "847c0e9b-15a1-42c9-9392-ca2f817c4eac",
          "version": 23,
          "type": "page",
          "properties": {
            "title": [["hello"]]
          },
          "content": ["cc1dee2e-269d-4cd0-a5a3-b1c3d72edf61"],
          "permissions": [
            {
              "role": "editor",
              "type": "user_permission",
              "user_id": "b21a69b3-a19b-438c-b599-e850190836a3"
            }
          ],
          "created_time": 1605604740000,
          "last_edited_time": 1605604740000,
          "parent_id": "ee7c0178-18cf-474e-a665-83f2432f545f",
          "parent_table": "space",
          "alive": true,
          "created_by_table": "notion_user",
          "created_by_id": "b21a69b3-a19b-438c-b599-e850190836a3",
          "last_edited_by_table": "notion_user",
          "last_edited_by_id": "b21a69b3-a19b-438c-b599-e850190836a3",
          "shard_id": 1004639,
          "space_id": "ee7c0178-18cf-474e-a665-83f2432f545f"
        }
      },
      "cc1dee2e-269d-4cd0-a5a3-b1c3d72edf61": {
        "role": "editor",
        "value": {
          "id": "cc1dee2e-269d-4cd0-a5a3-b1c3d72edf61",
          "version": 12,
          "type": "text",
          "properties": {
            "title": [["1234"]]
          },
          "created_time": 1605604740000,
          "last_edited_time": 1605604740000,
          "parent_id": "847c0e9b-15a1-42c9-9392-ca2f817c4eac",
          "parent_table": "block",
          "alive": true,
          "created_by_table": "notion_user",
          "created_by_id": "b21a69b3-a19b-438c-b599-e850190836a3",
          "last_edited_by_table": "notion_user",
          "last_edited_by_id": "b21a69b3-a19b-438c-b599-e850190836a3",
          "shard_id": 1004639,
          "space_id": "ee7c0178-18cf-474e-a665-83f2432f545f"
        }
      }
    }
    ```

    </details>

  - <details><summary>Database í•˜ìœ„ í˜ì´ì§€</summary>

    ```json
    {
      "15afa14b-8f9c-4b6c-97cc-46375c775cc5": {
        "role": "reader",
        "value": {
          "id": "15afa14b-8f9c-4b6c-97cc-46375c775cc5",
          "version": 25,
          "type": "page",
          "properties": [Object],
          "created_time": 1605517260000,
          "last_edited_time": 1605602760000,
          // ë¶€ëª¨ Id
          // ë°ì´í„°ë² ì´ìŠ¤ì˜ ê²½ìš° collection_id
          "parent_id": "e543505f-be64-46cd-9c55-07117dc85a92",
          // ë¶€ëª¨
          "parent_table": "collection",
          "alive": true,
          "created_by_table": "notion_user",
          // user_id
          "created_by_id": "b21a69b3-a19b-438c-b599-e850190836a3",
          "last_edited_by_table": "notion_user",
          "last_edited_by_id": "b21a69b3-a19b-438c-b599-e850190836a3",
          "shard_id": 1004639,
          "space_id": "ee7c0178-18cf-474e-a665-83f2432f545f"
        }
      },

      // ë¶€ëª¨ê°€ spaceê°€ ì•„ë‹Œ ê²½ìš° ë¶€ëª¨
      "acc3dfd0-339e-4cac-b5ba-ae8673fddfad": {
        "role": "reader",
        "value": {
          "id": "acc3dfd0-339e-4cac-b5ba-ae8673fddfad",
          "version": 106,
          "type": "collection_view_page",
          "view_ids": [Array],
          "collection_id": "e543505f-be64-46cd-9c55-07117dc85a92",
          "format": [Object],
          "permissions": [Array],
          "created_time": 1600223639505,
          "last_edited_time": 1605594780000,
          "parent_id": "ee7c0178-18cf-474e-a665-83f2432f545f",
          "parent_table": "space",
          "alive": true,
          "created_by_table": "notion_user",
          "created_by_id": "b21a69b3-a19b-438c-b599-e850190836a3",
          "last_edited_by_table": "notion_user",
          "last_edited_by_id": "b21a69b3-a19b-438c-b599-e850190836a3",
          "shard_id": 1004639,
          "space_id": "ee7c0178-18cf-474e-a665-83f2432f545f"
        }
      }
    }
    ```

    </details>

  - <details><summary>ë©”íƒ€ë°ì´í„°ê°€ ìˆëŠ” í˜ì´ì§€</summary>

    ```json
    {
      "1c7c8eb6-ec3b-42fb-b950-63abd3c9bd61": {
        "role": "reader",
        "value": {
          "id": "1c7c8eb6-ec3b-42fb-b950-63abd3c9bd61",
          "version": 6,
          "type": "page",
          // ë°ì´í„°ë² ì´ìŠ¤ í•˜ìœ„ì— ìˆëŠ” í˜ì´ì§€ì˜ ë©”íƒ€ë°ì´í„° ë¶€ëª¨ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•´ì„œ ê°€ì ¸ì™€ì•¼ í•¨.
          "properties": {
            "RXKJ": [
              // ì—¬ëŸ¬ íƒœê·¸ ëª©ë¡ì´ ë¬¸ìì—´ ',' ë¡œ êµ¬ë¶„ë˜ì–´ ì˜´.
              ["hello,bye"]
            ],
            "fb_;": [["ğŸ›  In Progress"]],
            "qS^H": [["Test"]],
            "title": [["asdf"], ["ì˜ ì‚¬ë³¸"]]
          },
          // ì „ì²´ í˜ì´ì§€, ì‘ì€ í˜ì´ì§€ ì‚¬ì´ì¦ˆì¼ ë•Œ í•¨ê»˜ ì˜´, ì—†ìœ¼ë©´ ì•ˆì˜´.
          "format": {
            "page_icon": "ğŸš¡",
            // linkì¸ ê²½ìš°ëŠ” ë§í¬
            "page_cover": "https://user-images.githubusercontent.com/1440854/79684011-6c948280-822e-11ea-9e23-1644903796fb.png",
            // ì—…ë¡œë“œì¸ ê²½ìš° https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d53a69fd-a3e1-4914-b014-63158a1078a2/blue.png
            // ê¸°ë³¸ ì œê³µì¸ ê²½ìš° /images/blue.png => https://notion.so/images/blue.pngë¡œ ì ‘ê·¼ ê°€ëŠ¥
            "page_cover_position": 0.5,
            "page_full_width": true,
            "page_small_text": true
          },
          "created_time": 1605594821014,
          "last_edited_time": 1605603000000,
          "parent_id": "e543505f-be64-46cd-9c55-07117dc85a92",
          "parent_table": "collection",
          "alive": true,
          "copied_from": "15afa14b-8f9c-4b6c-97cc-46375c775cc5",
          "created_by_table": "notion_user",
          "created_by_id": "b21a69b3-a19b-438c-b599-e850190836a3",
          "last_edited_by_table": "notion_user",
          "last_edited_by_id": "b21a69b3-a19b-438c-b599-e850190836a3",
          "shard_id": 1004639,
          "space_id": "ee7c0178-18cf-474e-a665-83f2432f545f"
        }
      },
      "acc3dfd0-339e-4cac-b5ba-ae8673fddfad": {
        "role": "reader",
        "value": {
          "id": "acc3dfd0-339e-4cac-b5ba-ae8673fddfad",
          "version": 106,
          "type": "collection_view_page",
          "view_ids": [
            "be43c1c8-dd64-4cfb-9df9-efd97d8af60a",
            "cfabb574-6051-47ed-9c14-ea3a1b6aead7",
            "87cdd007-d8d6-464c-82f2-c7a4153bab0d",
            "c09c2c36-0419-4bff-8195-bf6c2b897d6f",
            "e0d39abd-4d7b-4c5c-9ce9-4984a3315932",
            "83b3d2a6-6f63-4940-987d-1142e51da175"
          ],
          "collection_id": "e543505f-be64-46cd-9c55-07117dc85a92",
          "format": {
            "page_cover_position": 0.6
          },
          "permissions": [
            {
              "role": "editor",
              "type": "user_permission",
              "user_id": "b21a69b3-a19b-438c-b599-e850190836a3"
            },
            {
              "role": "reader",
              "type": "public_permission"
            }
          ],
          "created_time": 1600223639505,
          "last_edited_time": 1605594780000,
          "parent_id": "ee7c0178-18cf-474e-a665-83f2432f545f",
          "parent_table": "space",
          "alive": true,
          "created_by_table": "notion_user",
          "created_by_id": "b21a69b3-a19b-438c-b599-e850190836a3",
          "last_edited_by_table": "notion_user",
          "last_edited_by_id": "b21a69b3-a19b-438c-b599-e850190836a3",
          "shard_id": 1004639,
          "space_id": "ee7c0178-18cf-474e-a665-83f2432f545f"
        }
      }
    }
    ```

    </details>

- get table ë¦¬í„´

  - <details><summary>tableë¡œ ëœ í˜ì´ì§€</summary>

    ```json
    [
      {
        "id": "11acfd54-2ee8-4640-b3fb-1782ce9b8caa",
        "Status": "ğŸ–¨ Published",
        "Category": "Test",
        "Name": "Basic Blocks"
      },
      {
        "id": "084bbefe-7f25-481a-bfbb-e8aff2152e4f",
        "Status": "ğŸ–¨ Published",
        "Category": "Test",
        "Name": "Copy of Basic Blocks"
      },
      {
        "id": "24786a8a-3d7d-4dfd-854d-ac40559c9f82",
        "Status": "ğŸ–¨ Published",
        "Category": "Test",
        "Name": "Code Blocks"
      },
      {
        "id": "74bbb810-9a68-499f-8f12-25dcce846f02",
        "Status": "ğŸ–¨ Published",
        "Category": "Test",
        "Name": "Embed Blocks"
      },
      {
        "id": "2df7176f-d58f-4c42-921b-55e9bbf0e92e",
        "Status": "ğŸ–¨ Published",
        "Category": "Test",
        "Name": "Table Blocks"
      },
      {
        "id": "30894478-96e6-4f95-9095-d84be27a82a9",
        "Status": "ğŸ–¨ Published",
        "Category": "Test",
        "Name": "Page Blocks"
      },
      {
        "id": "cee84696-242a-4f6e-953a-2c7ecb8b1603",
        "Status": "ğŸ–¨ Published",
        "Category": "Test",
        "Name": "Advanced Blocks"
      },
      {
        "id": "64c69eaf-268a-4076-bf48-d8ee5f2ca8c8",
        "Status": "ğŸ–¨ Published",
        "Category": "Test",
        "Name": "Linked Page"
      },
      {
        "id": "6a8383c0-0a12-4859-9edc-2fe41e9cbe75",
        "Status": "ğŸ–¨ Published",
        "Category": "Test",
        "Name": "Recursive embed Image"
      },
      {
        "id": "d10a7885-58f0-4ba9-b9a4-fb357ab796e8",
        "Status": "ğŸ–¨ Published",
        "Category": "Example",
        "Name": "Example Pages"
      },
      {
        "id": "1c7c8eb6-ec3b-42fb-b950-63abd3c9bd61",
        "Tags": ["hello", "bye"],
        "Status": "ğŸ›  In Progress",
        "Category": "Test",
        "Name": "asdfì˜ ì‚¬ë³¸"
      },
      // ì™„ì „íˆ ì•ˆì§€ì› ì„ ë•ŒëŠ” ë¹ˆë¬¸ìì—´ë¡œ ì˜´.
      {
        "id": "e8b450e4-f686-4d0b-9212-6241e6099a0b",
        "Tags": [""],
        "Status": "",
        "Category": ""
      }
    ]
    ```

    </details>

- blocks

### Accept vs Content-Type

- Accept : í´ë¼ì´ì–¸íŠ¸ê°€ ë°›ì„ ìˆ˜ ìˆëŠ” ì‘ë‹µ í˜•ì‹ì„ ì§€ì •í•¨.

- Content-Type : í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚´ëŠ” ì½˜í…ì¸ ì˜ í˜•ì‹
