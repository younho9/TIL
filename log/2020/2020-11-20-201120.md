---
icon: ğŸ“†
slug: '201120'
title: '201120'
main_category: Log
category: 2020
tags: ['HTTP']
author: Younho Choo
author_title: younho9
author_url: https://github.com/younho9
author_image_url: https://avatars.githubusercontent.com/u/48426991
created_time: 2020-11-20
updated_time: 2021-02-15
---

## ì¿ í‚¤ì™€ ì¸ì¦(Auth)

### ì¿ í‚¤ë€?

> ğŸ“Œ ìƒíƒœê°€ ì—†ëŠ”(stateless) HTTP í”„ë¡œí† ì½œì—ì„œ ìƒíƒœ ì •ë³´ë¥¼ ê¸°ì–µí•  ìˆ˜ ìˆëŠ” ê¸°ìˆ 

- ì„œë²„ê°€ ì‚¬ìš©ìì˜ ì›¹ ë¸Œë¼ìš°ì €ì— ì „ì†¡í•˜ëŠ” ì‘ì€ ë°ì´í„° ì¡°ê°

- **ë™ì¼í•œ ì„œë²„ì— ì¬ ìš”ì²­** ì‹œ ì €ì¥ëœ ë°ì´í„°ë¥¼ í•¨ê»˜ ì „ì†¡

- ì¿ í‚¤ëŠ” ë™ì¼í•œ ë¸Œë¼ìš°ì €ì—ì„œ ë“¤ì–´ì™”ëŠ”ì§€ ì•„ë‹Œì§€ë¥¼ íŒë‹¨í•  ë•Œ ì£¼ë¡œ ì‚¬ìš© (ì‚¬ìš©ìì˜ë¡œ
  ê·¸ì¸ ìƒíƒœë¥¼ ìœ ì§€)

#### ëª©ì 

- **ì„¸ì…˜ ê´€ë¦¬**

  ì„œë²„ì— ì €ì¥í•´ì•¼ í•  ë¡œê·¸ì¸, ì¥ë°”êµ¬ë‹ˆ, ê²Œì„ ìŠ¤ì½”ì–´ ë“±ë“±ì˜ ì •ë³´ë¥¼ ê´€ë¦¬í•¨

- **ê°œì¸í™”**

  ì‚¬ìš©ì ì„ í˜¸, í…Œë§ˆ ë“±ì˜ ì„¸íŒ…

- **íŠ¸ë˜í‚¹**

  ì‚¬ìš©ìì˜ í–‰ë™ì„ ê¸°ë¡í•˜ê³  ë¶„ì„í•˜ëŠ” ìš©ë„

### ì¿ í‚¤ ìƒì„±í•˜ê¸°

HTTP ì‘ë‹µ í—¤ë”ì˜ `Set-Cookie` keyì— ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

```javascript
function(req, res) {
  res.writeHead(200, {
    'Set-Cookie': ['yummy_cookie=choco', 'tasty_cookie=strawberry'],
  })
}
```

### ì¿ í‚¤ ê°€ì ¸ì˜¤ê¸°

```javascript
function(req, res) {
  console.log(res.headers.cookie); // ['yummy_cookie=choco', 'tasty_cookie=strawberry']
}
```

### Session vs Persistent

#### Session Cookie

- ë¸Œë¼ìš°ì €ê°€ ì¢…ë£Œë˜ëŠ” ê²½ìš° ì‚­ì œ ë¨.

> session storageëŠ” ë¸Œë¼ìš°ì € íƒ­ì´ ì¢…ë£Œë˜ë©´ ì‚­ì œë˜ëŠ” ë°˜ë©´, ì¿ í‚¤ëŠ” ë¸Œë¼ìš°ì € íƒ­ ê°„
> ì—ë„ ê³µìœ ë˜ì–´ ë¸Œë¼ìš°ì €ê°€ ì™„ì „íˆ ì¢…ë£Œë˜ì–´ì•¼ ì‚­ì œëœë‹¤.
> [ì°¸ì¡°](https://ko.javascript.info/localstorage)

#### Persistent Cookie

- ë¸Œë¼ìš°ì €ë¥¼ ì¢…ë£Œí•´ë„ ì‚¬ìš©ìì˜ í•˜ë“œë””ìŠ¤í¬ì— ì €ì¥.

- ì‚­ì œ ì‹œê¸° : `Max-Age` ì†ì„±ì— ëª…ì‹œëœ ê¸°ê°„ ì´í›„ì—, ë˜ëŠ” `Expires` ì†ì„±ì— ëª…ì‹œëœ
  ë‚ ì§œì— ì‚­ì œ, ë˜ëŠ” ì§ì ‘ ì‚­ì œ

### Secure & HttpOnly

#### Secure

```javascript
'Set-Cookie': ['hello_secure_cookie=hello-secure; Secure'],
```

Secure ì¿ í‚¤ëŠ” HTTPS í”„ë¡œí† ì½œ ìƒì—ì„œ ì•”í˜¸í™”ëœ ìš”ì²­ì¼ ê²½ìš°ì—ë§Œ ì „ì†¡ëœë‹¤. í•˜ì§€ë§Œ ì´
í”Œë˜ê·¸ê°€ ì‹¤ì§ˆì ì¸ ë³´ì•ˆì„ ì œê³µí•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.

#### HttpOnly

```javascript
'Set-Cookie': ['hello_http_only=hello-http; HttpOnly'],
```

HttpOnly ì¿ í‚¤ëŠ” JavaScriptì˜ document.cookie APIë¡œ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤. ì„œë²„ì—ê²Œ ì „ì†¡
ë˜ê¸°ë§Œ í•œë‹¤.

### Path & Domain

#### path

`path=/subpath` ì´ëŸ° ì‹ìœ¼ë¡œ ì¿ í‚¤ë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•˜ì—¬ ìš”ì²­ë˜ëŠ” URL ë‚´ì— ë°˜ë“œì‹œ ì¡´ì¬
í•´ì•¼ í•˜ëŠ” URL ê²½ë¡œë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

#### domain

```javascript
'Set-Cookie': ['hello_domain=hello-domain; Domain=o2.org'],
```

ì´ë ‡ê²Œ ì§€ì •í•˜ë©´ `subdomain.o2.org` ë“±ë“±ì˜ ëª¨ë“  ì„œë¸Œ ë„ë©”ì¸ì— ëŒ€í•´ì„œë„ ì¿ í‚¤ê°€ ì €
ì¥ë˜ê²Œ ëœë‹¤.
